module.exports=function(e,t){"use strict";var n={};function __webpack_require__(t){if(n[t]){return n[t].exports}var r=n[t]={i:t,l:false,exports:{}};var s=true;try{e[t].call(r.exports,r,r.exports,__webpack_require__);s=false}finally{if(s)delete n[t]}r.l=true;return r.exports}__webpack_require__.ab=__dirname+"/";function startup(){return __webpack_require__(960)}return startup()}({50:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.RubyGemsInstaller=void 0;const s=r(n(747));const o=r(n(622));const i=r(n(413));const a=r(n(669));const u=n(520);const c=r(n(429));const l=a.default.debuglog("@moneyforward/sca-action-core/tool/installer");class RubyGemsInstaller{constructor(e=true,t=global.process){this.isStrict=e;this.process=t;this.path=RubyGemsInstaller.addPath(this.process.env);this.bundledGems=(async()=>{const e=new Map;const t=s.default.existsSync("Gemfile.lock")?s.default.createReadStream("Gemfile.lock"):i.default.Readable.from([]);const n=/^ {4}(.+) \((.+)\)$/;for await(const r of t.pipe(new u.transform.Lines)){const[t,s,o]=n.exec(r)||[];if(t)e.set(s,o)}return e})()}static async addPath(e=global.process.env){const t=await c.default.substitute("gem",["env","path"]);const n=e["PATH"]=t.split(o.default.delimiter).map(e=>o.default.join(e,"bin")).concat(e.PATH||"").join(o.default.delimiter);l("PATH=%s",n);return n}async*resolve(e){const t=([e,t])=>`${e}${t&&":"+t||""}`;const n=await this.bundledGems;for await(const r of e)if(this.isStrict){yield t([r,n.get(r)])}else{for(const[e,s]of n){if(!e.startsWith(r))continue;const n=e[r.length];if(n===undefined||n==="_"||n==="-")yield t([e,s])}}}async execute(e=[]){return Promise.all([(async()=>{const t=["i","-N","--user-install"];const n=new c.default("gem",t,undefined,function*(e,n,r){var s,o;(s=e.stdout)===null||s===void 0?void 0:s.pipe(process.stdout);(o=e.stderr)===null||o===void 0?void 0:o.pipe(process.stderr);yield r.slice(t.length)});return u.reduce(n.execute(this.resolve(e)),(e,t)=>{t.map(e=>e.split(":",2)).forEach(([t,n])=>e.set(t,n));return e},new Map)})(),this.path]).then(([e])=>e)}}t.RubyGemsInstaller=RubyGemsInstaller},70:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const s=r(n(407));t.JSON=s.default;const o=r(n(84));t.Lines=o.default},84:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const s=r(n(413));const o=n(304);const i=r(n(669));const a=i.default.debuglog("@moneyforward/stream-util/lines");class Lines extends s.default.Transform{constructor(e){super({objectMode:true,transform:(e,t,n)=>{try{a("%d: %s",this.count+=1,t);const r=(e=>{return Buffer.isBuffer(e)||e instanceof String||typeof e==="string"})(e);if(!r)return n(null,e);const s=this.decoder.write(e);const o=this.split(this.buffer+s);const i=o.pop();for(const e of o)this.push(e);this.buffer=i||"";n()}catch(e){n(e)}},flush:e=>{try{const t=this.decoder.end();const n=this.split(this.buffer+t);const r=n.pop();for(const e of n)this.push(e);if(r&&r.length)this.push(r);e()}catch(t){e(t)}}});this.count=0;this.decoder=new o.StringDecoder(e);this.buffer=""}split(e){return e.replace(/\r\n/g,"\n").split(/[\r\n]/)}}t.default=Lines},86:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true})},87:function(e){e.exports=require("os")},93:function(e,t,n){e.exports=minimatch;minimatch.Minimatch=Minimatch;var r={sep:"/"};try{r=n(622)}catch(e){}var s=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={};var o=n(306);var i={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}};var a="[^/]";var u=a+"*?";var c="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?";var l="(?:(?!(?:\\/|^)\\.).)*?";var f=charSet("().*{}+?[]^$\\!");function charSet(e){return e.split("").reduce(function(e,t){e[t]=true;return e},{})}var d=/\/+/;minimatch.filter=filter;function filter(e,t){t=t||{};return function(n,r,s){return minimatch(n,e,t)}}function ext(e,t){e=e||{};t=t||{};var n={};Object.keys(t).forEach(function(e){n[e]=t[e]});Object.keys(e).forEach(function(t){n[t]=e[t]});return n}minimatch.defaults=function(e){if(!e||!Object.keys(e).length)return minimatch;var t=minimatch;var n=function minimatch(n,r,s){return t.minimatch(n,r,ext(e,s))};n.Minimatch=function Minimatch(n,r){return new t.Minimatch(n,ext(e,r))};return n};Minimatch.defaults=function(e){if(!e||!Object.keys(e).length)return Minimatch;return minimatch.defaults(e).Minimatch};function minimatch(e,t,n){if(typeof t!=="string"){throw new TypeError("glob pattern string required")}if(!n)n={};if(!n.nocomment&&t.charAt(0)==="#"){return false}if(t.trim()==="")return e==="";return new Minimatch(t,n).match(e)}function Minimatch(e,t){if(!(this instanceof Minimatch)){return new Minimatch(e,t)}if(typeof e!=="string"){throw new TypeError("glob pattern string required")}if(!t)t={};e=e.trim();if(r.sep!=="/"){e=e.split(r.sep).join("/")}this.options=t;this.set=[];this.pattern=e;this.regexp=null;this.negate=false;this.comment=false;this.empty=false;this.make()}Minimatch.prototype.debug=function(){};Minimatch.prototype.make=make;function make(){if(this._made)return;var e=this.pattern;var t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=true;return}if(!e){this.empty=true;return}this.parseNegate();var n=this.globSet=this.braceExpand();if(t.debug)this.debug=console.error;this.debug(this.pattern,n);n=this.globParts=n.map(function(e){return e.split(d)});this.debug(this.pattern,n);n=n.map(function(e,t,n){return e.map(this.parse,this)},this);this.debug(this.pattern,n);n=n.filter(function(e){return e.indexOf(false)===-1});this.debug(this.pattern,n);this.set=n}Minimatch.prototype.parseNegate=parseNegate;function parseNegate(){var e=this.pattern;var t=false;var n=this.options;var r=0;if(n.nonegate)return;for(var s=0,o=e.length;s<o&&e.charAt(s)==="!";s++){t=!t;r++}if(r)this.pattern=e.substr(r);this.negate=t}minimatch.braceExpand=function(e,t){return braceExpand(e,t)};Minimatch.prototype.braceExpand=braceExpand;function braceExpand(e,t){if(!t){if(this instanceof Minimatch){t=this.options}else{t={}}}e=typeof e==="undefined"?this.pattern:e;if(typeof e==="undefined"){throw new TypeError("undefined pattern")}if(t.nobrace||!e.match(/\{.*\}/)){return[e]}return o(e)}Minimatch.prototype.parse=parse;var p={};function parse(e,t){if(e.length>1024*64){throw new TypeError("pattern is too long")}var n=this.options;if(!n.noglobstar&&e==="**")return s;if(e==="")return"";var r="";var o=!!n.nocase;var c=false;var l=[];var d=[];var h;var m=false;var g=-1;var b=-1;var y=e.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)";var v=this;function clearStateChar(){if(h){switch(h){case"*":r+=u;o=true;break;case"?":r+=a;o=true;break;default:r+="\\"+h;break}v.debug("clearStateChar %j %j",h,r);h=false}}for(var _=0,S=e.length,w;_<S&&(w=e.charAt(_));_++){this.debug("%s\t%s %s %j",e,_,r,w);if(c&&f[w]){r+="\\"+w;c=false;continue}switch(w){case"/":return false;case"\\":clearStateChar();c=true;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s\t%s %s %j <-- stateChar",e,_,r,w);if(m){this.debug("  in class");if(w==="!"&&_===b+1)w="^";r+=w;continue}v.debug("call clearStateChar %j",h);clearStateChar();h=w;if(n.noext)clearStateChar();continue;case"(":if(m){r+="(";continue}if(!h){r+="\\(";continue}l.push({type:h,start:_-1,reStart:r.length,open:i[h].open,close:i[h].close});r+=h==="!"?"(?:(?!(?:":"(?:";this.debug("plType %j %j",h,r);h=false;continue;case")":if(m||!l.length){r+="\\)";continue}clearStateChar();o=true;var O=l.pop();r+=O.close;if(O.type==="!"){d.push(O)}O.reEnd=r.length;continue;case"|":if(m||!l.length||c){r+="\\|";c=false;continue}clearStateChar();r+="|";continue;case"[":clearStateChar();if(m){r+="\\"+w;continue}m=true;b=_;g=r.length;r+=w;continue;case"]":if(_===b+1||!m){r+="\\"+w;c=false;continue}if(m){var M=e.substring(b+1,_);try{RegExp("["+M+"]")}catch(e){var R=this.parse(M,p);r=r.substr(0,g)+"\\["+R[0]+"\\]";o=o||R[1];m=false;continue}}o=true;m=false;r+=w;continue;default:clearStateChar();if(c){c=false}else if(f[w]&&!(w==="^"&&m)){r+="\\"}r+=w}}if(m){M=e.substr(b+1);R=this.parse(M,p);r=r.substr(0,g)+"\\["+R[0];o=o||R[1]}for(O=l.pop();O;O=l.pop()){var x=r.slice(O.reStart+O.open.length);this.debug("setting tail",r,O);x=x.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(e,t,n){if(!n){n="\\"}return t+t+n+"|"});this.debug("tail=%j\n   %s",x,x,O,r);var A=O.type==="*"?u:O.type==="?"?a:"\\"+O.type;o=true;r=r.slice(0,O.reStart)+A+"\\("+x}clearStateChar();if(c){r+="\\\\"}var j=false;switch(r.charAt(0)){case".":case"[":case"(":j=true}for(var E=d.length-1;E>-1;E--){var T=d[E];var C=r.slice(0,T.reStart);var P=r.slice(T.reStart,T.reEnd-8);var $=r.slice(T.reEnd-8,T.reEnd);var D=r.slice(T.reEnd);$+=D;var N=C.split("(").length-1;var I=D;for(_=0;_<N;_++){I=I.replace(/\)[+*?]?/,"")}D=I;var k="";if(D===""&&t!==p){k="$"}var G=C+P+D+k+$;r=G}if(r!==""&&o){r="(?=.)"+r}if(j){r=y+r}if(t===p){return[r,o]}if(!o){return globUnescape(e)}var z=n.nocase?"i":"";try{var L=new RegExp("^"+r+"$",z)}catch(e){return new RegExp("$.")}L._glob=e;L._src=r;return L}minimatch.makeRe=function(e,t){return new Minimatch(e,t||{}).makeRe()};Minimatch.prototype.makeRe=makeRe;function makeRe(){if(this.regexp||this.regexp===false)return this.regexp;var e=this.set;if(!e.length){this.regexp=false;return this.regexp}var t=this.options;var n=t.noglobstar?u:t.dot?c:l;var r=t.nocase?"i":"";var o=e.map(function(e){return e.map(function(e){return e===s?n:typeof e==="string"?regExpEscape(e):e._src}).join("\\/")}).join("|");o="^(?:"+o+")$";if(this.negate)o="^(?!"+o+").*$";try{this.regexp=new RegExp(o,r)}catch(e){this.regexp=false}return this.regexp}minimatch.match=function(e,t,n){n=n||{};var r=new Minimatch(t,n);e=e.filter(function(e){return r.match(e)});if(r.options.nonull&&!e.length){e.push(t)}return e};Minimatch.prototype.match=match;function match(e,t){this.debug("match",e,this.pattern);if(this.comment)return false;if(this.empty)return e==="";if(e==="/"&&t)return true;var n=this.options;if(r.sep!=="/"){e=e.split(r.sep).join("/")}e=e.split(d);this.debug(this.pattern,"split",e);var s=this.set;this.debug(this.pattern,"set",s);var o;var i;for(i=e.length-1;i>=0;i--){o=e[i];if(o)break}for(i=0;i<s.length;i++){var a=s[i];var u=e;if(n.matchBase&&a.length===1){u=[o]}var c=this.matchOne(u,a,t);if(c){if(n.flipNegate)return true;return!this.negate}}if(n.flipNegate)return false;return this.negate}Minimatch.prototype.matchOne=function(e,t,n){var r=this.options;this.debug("matchOne",{this:this,file:e,pattern:t});this.debug("matchOne",e.length,t.length);for(var o=0,i=0,a=e.length,u=t.length;o<a&&i<u;o++,i++){this.debug("matchOne loop");var c=t[i];var l=e[o];this.debug(t,c,l);if(c===false)return false;if(c===s){this.debug("GLOBSTAR",[t,c,l]);var f=o;var d=i+1;if(d===u){this.debug("** at the end");for(;o<a;o++){if(e[o]==="."||e[o]===".."||!r.dot&&e[o].charAt(0)===".")return false}return true}while(f<a){var p=e[f];this.debug("\nglobstar while",e,f,t,d,p);if(this.matchOne(e.slice(f),t.slice(d),n)){this.debug("globstar found match!",f,a,p);return true}else{if(p==="."||p===".."||!r.dot&&p.charAt(0)==="."){this.debug("dot detected!",e,f,t,d);break}this.debug("globstar swallow a segment, and continue");f++}}if(n){this.debug("\n>>> no match, partial?",e,f,t,d);if(f===a)return true}return false}var h;if(typeof c==="string"){if(r.nocase){h=l.toLowerCase()===c.toLowerCase()}else{h=l===c}this.debug("string match",c,l,h)}else{h=l.match(c);this.debug("pattern match",c,l,h)}if(!h)return false}if(o===a&&i===u){return true}else if(o===a){return n}else if(i===u){var m=o===a-1&&e[o]==="";return m}throw new Error("wtf?")};function globUnescape(e){return e.replace(/\\(.)/g,"$1")}function regExpEscape(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},129:function(e){e.exports=require("child_process")},181:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.ReporterRepository=t.Statistic=void 0;const s=r(n(413));const o=r(n(669));const i=o.default.debuglog("@moneyforward/code-review-action/reporter");class Statistic{constructor(e=0,t=0,n=0){this.numberOfProblems=e;this.numberOfDetections=t;this.numberOfFiles=n}static add(e,t){return new Statistic(e.numberOfProblems+t.numberOfProblems,e.numberOfDetections+t.numberOfDetections,e.numberOfFiles+t.numberOfFiles)}}t.Statistic=Statistic;class ReporterRepository{constructor(e,...t){this.defaultReporterType=e;this.repository=new Map(t.concat(e).map(e=>[e.name,e]))}static createMulticasterType(...e){i("ReporterTypes: %s",e);return class Multicaster{constructor(t,n,r){this.reporters=e.map(e=>new e(t,n,r))}initialize(){return Promise.all(this.reporters.map(e=>e.initialize()))}finalize(){return Promise.all(this.reporters.map(e=>e.finalize()))}createReportWriter(e,t){const n=new Map;const r=this.reporters.map(s=>s.createReportWriter(t=>{if(n.has(s))return;n.set(s,t);if(n.size===r.length){Promise.all(n.values()).then(t=>e(t.reduce(Statistic.add)))}},t));const o=new s.default.PassThrough({objectMode:true});for(const e of r)s.default.pipeline(o,e,e=>e&&i("%o",e));return o}}}register(e,t){const n=t||e.name;i("setting %s...",n);this.repository.set(n,e)}get(e){const t=e=>{return(e||"").split(",").map(e=>e?e:undefined).map(e=>this.repository.get(e)||this.defaultReporterType)};const[n,...r]=t(e);return r.length>0?ReporterRepository.createMulticasterType(n,...r):n}}t.ReporterRepository=ReporterRepository},281:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function fulfilled(e){try{step(r.next(e))}catch(e){s(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){s(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:true});const s=n(297);function create(e,t){return r(this,void 0,void 0,function*(){return yield s.DefaultGlobber.create(e,t)})}t.create=create},297:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function fulfilled(e){try{step(r.next(e))}catch(e){s(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){s(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var s=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof __values==="function"?__values(e):e[Symbol.iterator](),n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n);function verb(t){n[t]=e[t]&&function(n){return new Promise(function(r,s){n=e[t](n),settle(r,s,n.done,n.value)})}}function settle(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}};var o=this&&this.__await||function(e){return this instanceof o?(this.v=e,this):new o(e)};var i=this&&this.__asyncGenerator||function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,i=[];return s={},verb("next"),verb("throw"),verb("return"),s[Symbol.asyncIterator]=function(){return this},s;function verb(e){if(r[e])s[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||resume(e,t)})}}function resume(e,t){try{step(r[e](t))}catch(e){settle(i[0][3],e)}}function step(e){e.value instanceof o?Promise.resolve(e.value.v).then(fulfill,reject):settle(i[0][2],e)}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){if(e(t),i.shift(),i.length)resume(i[0][0],i[0][1])}};Object.defineProperty(t,"__esModule",{value:true});const a=n(470);const u=n(747);const c=n(601);const l=n(622);const f=n(597);const d=n(327);const p=n(923);const h=n(728);const m=process.platform==="win32";class DefaultGlobber{constructor(e){this.patterns=[];this.searchPaths=[];this.options=c.getOptions(e)}getSearchPaths(){return this.searchPaths.slice()}glob(){var e,t;return r(this,void 0,void 0,function*(){const n=[];try{for(var r=s(this.globGenerator()),o;o=yield r.next(),!o.done;){const e=o.value;n.push(e)}}catch(t){e={error:t}}finally{try{if(o&&!o.done&&(t=r.return))yield t.call(r)}finally{if(e)throw e.error}}return n})}globGenerator(){return i(this,arguments,function*globGenerator_1(){const e=c.getOptions(this.options);const t=[];for(const n of this.patterns){t.push(n);if(e.implicitDescendants&&(n.trailingSeparator||n.segments[n.segments.length-1]!=="**")){t.push(new p.Pattern(n.negate,n.segments.concat("**")))}}const n=[];for(const e of f.getSearchPaths(t)){a.debug(`Search path '${e}'`);try{yield o(u.promises.lstat(e))}catch(e){if(e.code==="ENOENT"){continue}throw e}n.unshift(new h.SearchState(e,1))}const r=[];while(n.length){const s=n.pop();const i=f.match(t,s.path);const a=!!i||f.partialMatch(t,s.path);if(!i&&!a){continue}const c=yield o(DefaultGlobber.stat(s,e,r));if(!c){continue}if(c.isDirectory()){if(i&d.MatchKind.Directory){yield yield o(s.path)}else if(!a){continue}const e=s.level+1;const t=(yield o(u.promises.readdir(s.path))).map(t=>new h.SearchState(l.join(s.path,t),e));n.push(...t.reverse())}else if(i&d.MatchKind.File){yield yield o(s.path)}}})}static create(e,t){return r(this,void 0,void 0,function*(){const n=new DefaultGlobber(t);if(m){e=e.replace(/\r\n/g,"\n");e=e.replace(/\r/g,"\n")}const r=e.split("\n").map(e=>e.trim());for(const e of r){if(!e||e.startsWith("#")){continue}else{n.patterns.push(new p.Pattern(e))}}n.searchPaths.push(...f.getSearchPaths(n.patterns));return n})}static stat(e,t,n){return r(this,void 0,void 0,function*(){let r;if(t.followSymbolicLinks){try{r=yield u.promises.stat(e.path)}catch(n){if(n.code==="ENOENT"){if(t.omitBrokenSymbolicLinks){a.debug(`Broken symlink '${e.path}'`);return undefined}throw new Error(`No information found for the path '${e.path}'. This may indicate a broken symbolic link.`)}throw n}}else{r=yield u.promises.lstat(e.path)}if(r.isDirectory()&&t.followSymbolicLinks){const t=yield u.promises.realpath(e.path);while(n.length>=e.level){n.pop()}if(n.some(e=>e===t)){a.debug(`Symlink cycle detected for path '${e.path}' and realpath '${t}'`);return undefined}n.push(t)}return r})}}t.DefaultGlobber=DefaultGlobber},303:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;Object.defineProperty(e,r,{enumerable:true,get:function(){return t[n]}})}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))r(t,e,n);s(t,e);return t};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.GlobFinder=t.PassThroughFinder=void 0;const a=i(n(747));const u=i(n(622));const c=o(n(281));class PassThroughFinder{find(e){return e.replace(/[\r\n]+/g,"\n").split("\n").filter(e=>e!=="")}}t.PassThroughFinder=PassThroughFinder;class GlobFinder{find(e){return async function*(){const t=await c.create(e);for await(const e of t.globGenerator()){if((await a.default.promises.stat(e)).isDirectory())continue;yield u.default.relative(process.cwd(),e)}}()}}t.GlobFinder=GlobFinder},304:function(e){e.exports=require("string_decoder")},306:function(e,t,n){var r=n(896);var s=n(621);e.exports=expandTop;var o="\0SLASH"+Math.random()+"\0";var i="\0OPEN"+Math.random()+"\0";var a="\0CLOSE"+Math.random()+"\0";var u="\0COMMA"+Math.random()+"\0";var c="\0PERIOD"+Math.random()+"\0";function numeric(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function escapeBraces(e){return e.split("\\\\").join(o).split("\\{").join(i).split("\\}").join(a).split("\\,").join(u).split("\\.").join(c)}function unescapeBraces(e){return e.split(o).join("\\").split(i).join("{").split(a).join("}").split(u).join(",").split(c).join(".")}function parseCommaParts(e){if(!e)return[""];var t=[];var n=s("{","}",e);if(!n)return e.split(",");var r=n.pre;var o=n.body;var i=n.post;var a=r.split(",");a[a.length-1]+="{"+o+"}";var u=parseCommaParts(i);if(i.length){a[a.length-1]+=u.shift();a.push.apply(a,u)}t.push.apply(t,a);return t}function expandTop(e){if(!e)return[];if(e.substr(0,2)==="{}"){e="\\{\\}"+e.substr(2)}return expand(escapeBraces(e),true).map(unescapeBraces)}function identity(e){return e}function embrace(e){return"{"+e+"}"}function isPadded(e){return/^-?0\d/.test(e)}function lte(e,t){return e<=t}function gte(e,t){return e>=t}function expand(e,t){var n=[];var o=s("{","}",e);if(!o||/\$$/.test(o.pre))return[e];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(o.body);var u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(o.body);var c=i||u;var l=o.body.indexOf(",")>=0;if(!c&&!l){if(o.post.match(/,.*\}/)){e=o.pre+"{"+o.body+a+o.post;return expand(e)}return[e]}var f;if(c){f=o.body.split(/\.\./)}else{f=parseCommaParts(o.body);if(f.length===1){f=expand(f[0],false).map(embrace);if(f.length===1){var d=o.post.length?expand(o.post,false):[""];return d.map(function(e){return o.pre+f[0]+e})}}}var p=o.pre;var d=o.post.length?expand(o.post,false):[""];var h;if(c){var m=numeric(f[0]);var g=numeric(f[1]);var b=Math.max(f[0].length,f[1].length);var y=f.length==3?Math.abs(numeric(f[2])):1;var v=lte;var _=g<m;if(_){y*=-1;v=gte}var S=f.some(isPadded);h=[];for(var w=m;v(w,g);w+=y){var O;if(u){O=String.fromCharCode(w);if(O==="\\")O=""}else{O=String(w);if(S){var M=b-O.length;if(M>0){var R=new Array(M+1).join("0");if(w<0)O="-"+R+O.slice(1);else O=R+O}}}h.push(O)}}else{h=r(f,function(e){return expand(e,false)})}for(var x=0;x<h.length;x++){for(var A=0;A<d.length;A++){var j=p+h[x]+d[A];if(!t||c||j)n.push(j)}}return n}},325:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;Object.defineProperty(e,r,{enumerable:true,get:function(){return t[n]}})}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))r(t,e,n);s(t,e);return t};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.isLocale=void 0;const a=i(n(622));const u=i(n(413));const c=i(n(669));const l=i(n(526));const f=o(n(391));const d=n(520);const p=c.default.debuglog("@moneyforward/code-review-action-misspell-plugin");function isLocale(e){return e==="UK"||e==="US"}t.isLocale=isLocale;class Analyzer extends f.default{constructor(...e){super("misspell",e.map(String),undefined,undefined,f.finder.GlobFinder)}async prepare(){console.log("::group::Installing packages...");try{const[e]=await Promise.all([l.default.substitute("go",["env","GOPATH"]),l.default.execute("go",["get","-v","-u","github.com/client9/misspell/cmd/misspell"])]);process.env["PATH"]=[a.default.join(e,"bin"),process.env.PATH].join(a.default.delimiter);p("%s",process.env.PATH)}finally{console.log("::endgroup::")}}createTransformStreams(){return[new d.transform.Lines,new u.default.Transform({readableObjectMode:true,writableObjectMode:true,transform:function(e,t,n){p("%s",e);const r=/^(.+):(\d+):(\d+): (".+" is a misspelling of ".+")$/;const[s,o,i,a,u]=r.exec(e)||[];n(null,s&&{file:o,line:i,column:a,message:u,severity:"warning",code:"misspelling"})}})]}}t.default=Analyzer},327:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n;(function(e){e[e["None"]=0]="None";e[e["Directory"]=1]="Directory";e[e["File"]=2]="File";e[e["All"]=3]="All"})(n=t.MatchKind||(t.MatchKind={}))},357:function(e){e.exports=require("assert")},383:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(357);const s=n(622);const o=n(972);const i=process.platform==="win32";class Path{constructor(e){this.segments=[];if(typeof e==="string"){r(e,`Parameter 'itemPath' must not be empty`);e=o.safeTrimTrailingSeparator(e);if(!o.hasRoot(e)){this.segments=e.split(s.sep)}else{let t=e;let n=o.dirname(t);while(n!==t){const e=s.basename(t);this.segments.unshift(e);t=n;n=o.dirname(t)}this.segments.unshift(t)}}else{r(e.length>0,`Parameter 'itemPath' must not be an empty array`);for(let t=0;t<e.length;t++){let n=e[t];r(n,`Parameter 'itemPath' must not contain any empty segments`);n=o.normalizeSeparators(e[t]);if(t===0&&o.hasRoot(n)){n=o.safeTrimTrailingSeparator(n);r(n===o.dirname(n),`Parameter 'itemPath' root segment contains information for multiple segments`);this.segments.push(n)}else{r(!n.includes(s.sep),`Parameter 'itemPath' contains unexpected path separators`);this.segments.push(n)}}}}toString(){let e=this.segments[0];let t=e.endsWith(s.sep)||i&&/^[A-Z]:$/i.test(e);for(let n=1;n<this.segments.length;n++){if(t){t=false}else{e+=s.sep}e+=this.segments[n]}return e}}t.Path=Path},391:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;Object.defineProperty(e,r,{enumerable:true,get:function(){return t[n]}})}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))r(t,e,n);s(t,e);return t};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const a=n(357);const u=i(n(622));const c=i(n(413));const l=i(n(669));const f=n(453);const d=i(n(429));const p=o(n(520));const h=n(303);const m=i(n(684));const g=f.reporter.Statistic;const b=l.default.promisify(c.default.pipeline);const y=l.default.debuglog("@moneyforward/sca-action-core");t.finder=o(n(303));t.installer=o(n(50));class StaticCodeAnalyzer{constructor(e,t=[],n={},r,s=h.PassThroughFinder,o){this.command=e;this.args=t;this.options=n;this.exitStatusThreshold=r;this.Finder=s;this.title=o;this.git=new m.default}get Command(){return d.default}async pipeline(e,t,...[n,r,s]){y("pipelining `%s` with %d argument(s)... (options: %o)",n,r.length,s);const o=e||c.default.Readable.from([]);o.unpipe(process.stdout);const i=this.createTransformStreams()||[];return[o,...i.concat(t)]}async analyze(e="."){a.strict(process.env.GITHUB_BASE_REF,"Environment variable `GITHUB_BASE_REF` is undefined.");a.strict(process.env.GITHUB_SHA,"Environment variable `GITHUB_SHA` is undefined.");const t=(async()=>{const e=e=>/\bgithub\.com\b/.test(e.url)&&e.mirror==="fetch";const t=await p.first(p.filter(this.git.listRemote(),e));return this.git.measureChangeRanges(process.env.GITHUB_BASE_REF||"",process.env.GITHUB_SHA||"",t===null||t===void 0?void 0:t.name)})();const n=(async()=>{const e=await this.git.showCurrentDirectoryUp();const t=u.default.relative(u.default.resolve(process.cwd(),e),process.cwd());y("dirname: %s",t);return{resolve:e=>u.default.join(t,u.default.relative(process.cwd(),e))}})();const[r,s]=await Promise.all([t,n,this.prepare()]);console.log(`::group::Analyze code statically using ${this.title||this.command}`);try{const t=new this.Reporter(r,s,[this.command,this.args,this.options]);const n=async function*(e,...n){var r;(r=e.stderr)===null||r===void 0?void 0:r.pipe(process.stderr);yield await new Promise((r,s)=>{const o=t.createReportWriter(r,n);this.pipeline(e.stdout,o,...n).then(b).catch(s)})}.bind(this);const o=new this.Command(this.command,this.args,this.options,n,this.exitStatusThreshold);await t.initialize();try{const n=await p.arrayify(o.execute((new this.Finder).find(e)));const r=n.reduce(g.add,new g);y("%o",r);console.log("Detected %d issue(s).",r.numberOfDetections);return r.numberOfDetections>0?1:0}finally{await t.finalize()}}finally{console.log(`::endgroup::`)}}}t.default=StaticCodeAnalyzer},407:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const s=r(n(413));const o=r(n(669));const i=o.default.debuglog("@moneyforward/stream-util/json");class JSON extends s.default.Transform{constructor(){super({readableObjectMode:true,writableObjectMode:false,transform:(e,t,n)=>{i("%d: %s",this.count+=1,t);const r=Buffer.isBuffer(e)?e:Buffer.from(e,t);this.buffers.push(r);n()},flush:e=>{try{const t=Buffer.concat(this.buffers).toString();i("%s",t);const n=global.JSON.parse(t);e(null,n)}catch(t){e(t)}}});this.count=0;this.buffers=[]}}t.default=JSON},413:function(e){e.exports=require("stream")},422:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const s=r(n(413));const o=n(181);class NopReporter{constructor(e,t,n){this.changeRanges=e;this.resolver=t;this.commandPrguments=n;this.initialize=(()=>Promise.resolve());this.finalize=(()=>Promise.resolve())}createReportWriter(e){return new s.default.Writable({objectMode:true,write:(e,t,n)=>{n()},final:t=>{t();e(new o.Statistic)}})}}t.default=NopReporter},429:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const s=n(129);const o=r(n(87));const i=r(n(669));const a=n(520);const u=i.default.debuglog("@moneyforward/command");const c=e=>{e.stdout&&e.stdout.pipe(process.stdout);e.stderr&&e.stderr.pipe(process.stderr);return[]};let l=(()=>{class Command{constructor(e,t=[],n={},r=c,s=1,o=0){this.command=e;this.args=t;this.options=n;this.iterate=r;this.parallelism=Command.defaultParallelism;this.argumentCountThreshold=Number.POSITIVE_INFINITY;this.initArgumentsSize=Command.calculateInitArgumentsSize(this.command,this.args,o);this.evaluateExitStatus=typeof s==="number"?e=>e<s:s}static sizeOf(e){return Buffer.from(e).length}static sizeOfEnvironment(e){return Object.entries(e).map(([e,t])=>Command.sizeOf(`${e}=${t}`)).reduce((e,t)=>e+t,0)}static calculateMaxArgumentsSize(e=global.process){return e.platform==="win32"?8191:131072-2048-Command.sizeOfEnvironment(e.env)}static calculateInitArgumentsSize(e,t,n){return[e].concat(t).map(Command.sizeOf).reduce((e,t)=>e+t)+Math.max(0,n)}static async execute(e,t,n,r,s,...o){const i=new Command(e,t,n,s,r).execute();if(!s)return a.reduce(i,e=>e,undefined);switch(o.length){case 0:return a.reduce(i,e=>e);case 1:{const[e]=o;return a.reduce(i,e)}default:{const[e,t]=o;return a.reduce(i,e,t)}}}static async substitute(e,t,n,r){const s=new Command(e,t,Object.assign({},n,{stdio:[r,"pipe","ignore"]}),async function*(e){if(e.stdout===null)return;yield a.stringify(e.stdout)}).execute();return a.arrayify(s).then(e=>e.join().replace(/((\r\n)+|\n+)$/,"")).catch(e=>{u("%s",e);return""})}async configureArguments(e){return this.args.concat(e)}async*spawn(...e){const t=await this.configureArguments(e);const n=[this.command,t,this.options];const r=s.spawn(...n);const o=new Promise((e,t)=>{r.once("error",t).once("close",n=>(this.evaluateExitStatus(n)?e:t)(n))});yield*this.iterate(r,...n);return await o}async*execute(e){u("parallelism: %d",this.parallelism);const t=[];async function*drain(e,t){const n=e.length<t?[]:e.splice(0);u("drain %d values.",n.length);for(const e of n)yield*e}let n=0;const r=(e,r=0)=>{t.push(this.spawn(...e));u("%d: spawn `%s` (arguments length: %d)",n+=1,this.command,e.length);return drain(t,r)};try{if(e===undefined){yield*r([]);return}const t=Command.calculateMaxArgumentsSize();const s=[];let o=this.initArgumentsSize;let i=0;for await(const n of e){const e=Command.sizeOf(n);if(e+o>t||i+1>this.argumentCountThreshold){yield*r(s,this.parallelism);s.length=0;o=this.initArgumentsSize;i=0}s.push(n);o+=e;i+=1}if(s.length)yield*r(s)}finally{u("%s %d process(es)",this.command,n)}}}Command.defaultParallelism=o.default.cpus().length;return Command})();t.default=l},431:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const s=r(n(87));function issueCommand(e,t,n){const r=new Command(e,t,n);process.stdout.write(r.toString()+s.EOL)}t.issueCommand=issueCommand;function issue(e,t=""){issueCommand(e,{},t)}t.issue=issue;const o="::";class Command{constructor(e,t,n){if(!e){e="missing.command"}this.command=e;this.properties=t;this.message=n}toString(){let e=o+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let t=true;for(const n in this.properties){if(this.properties.hasOwnProperty(n)){const r=this.properties[n];if(r){if(t){t=false}else{e+=","}e+=`${n}=${escapeProperty(r)}`}}}}e+=`${o}${escapeData(this.message)}`;return e}}function toCommandValue(e){if(e===null||e===undefined){return""}else if(typeof e==="string"||e instanceof String){return e}return JSON.stringify(e)}t.toCommandValue=toCommandValue;function escapeData(e){return toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function escapeProperty(e){return toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}},453:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;Object.defineProperty(e,r,{enumerable:true,get:function(){return t[n]}})}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))r(t,e,n);s(t,e);return t};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const a=i(n(669));const u=n(181);const c=i(n(858));const l=i(n(422));t.analyzer=o(n(86));t.reporter=o(n(181));const f=a.default.debuglog("@moneyforward/code-review-action");class CodeReviewAction{constructor(e,t=CodeReviewAction.createDefaultReporterRepository()){this.reporterRepository=t;if(e){this.module=Promise.resolve({default:e})}else{if(!process.env.INPUT_ANALYZER)throw new TypeError("Environment variable `INPUT_ANALYZER` is undefined.");this.module=Promise.resolve().then(()=>o(require(process.env.INPUT_ANALYZER)))}this.files=process.env.INPUT_FILES||".";const n=process.env.INPUT_OPTIONS?JSON.parse(process.env.INPUT_OPTIONS):[];this.args=[].concat(n);const r=process.env.INPUT_WORKING_DIRECTORY;r&&process.chdir(r);this.reporterTypeNotation=process.env.INPUT_REPORTER_TYPE_NOTATION}static createDefaultReporterRepository(){return new u.ReporterRepository(c.default,l.default)}async execute(){const e=await this.module;f("%s",e);const t=this.reporterRepository;const n=this.reporterTypeNotation;class Analyzer extends e.default{get Reporter(){return super.Reporter||t.get(n)}}const r=new Analyzer(...this.args);return await r.analyze(this.files)}}t.default=CodeReviewAction},470:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function fulfilled(e){try{step(r.next(e))}catch(e){s(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){s(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const o=n(431);const i=s(n(87));const a=s(n(622));var u;(function(e){e[e["Success"]=0]="Success";e[e["Failure"]=1]="Failure"})(u=t.ExitCode||(t.ExitCode={}));function exportVariable(e,t){const n=o.toCommandValue(t);process.env[e]=n;o.issueCommand("set-env",{name:e},n)}t.exportVariable=exportVariable;function setSecret(e){o.issueCommand("add-mask",{},e)}t.setSecret=setSecret;function addPath(e){o.issueCommand("add-path",{},e);process.env["PATH"]=`${e}${a.delimiter}${process.env["PATH"]}`}t.addPath=addPath;function getInput(e,t){const n=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!n){throw new Error(`Input required and not supplied: ${e}`)}return n.trim()}t.getInput=getInput;function setOutput(e,t){o.issueCommand("set-output",{name:e},t)}t.setOutput=setOutput;function setCommandEcho(e){o.issue("echo",e?"on":"off")}t.setCommandEcho=setCommandEcho;function setFailed(e){process.exitCode=u.Failure;error(e)}t.setFailed=setFailed;function isDebug(){return process.env["RUNNER_DEBUG"]==="1"}t.isDebug=isDebug;function debug(e){o.issueCommand("debug",{},e)}t.debug=debug;function error(e){o.issue("error",e instanceof Error?e.toString():e)}t.error=error;function warning(e){o.issue("warning",e instanceof Error?e.toString():e)}t.warning=warning;function info(e){process.stdout.write(e+i.EOL)}t.info=info;function startGroup(e){o.issue("group",e)}t.startGroup=startGroup;function endGroup(){o.issue("endgroup")}t.endGroup=endGroup;function group(e,t){return r(this,void 0,void 0,function*(){startGroup(e);let n;try{n=yield t()}finally{endGroup()}return n})}t.group=group;function saveState(e,t){o.issueCommand("save-state",{name:e},t)}t.saveState=saveState;function getState(e){return process.env[`STATE_${e}`]||""}t.getState=getState},520:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const o=r(n(413));t.transform=s(n(70));async function*concat(...e){for(const t of e)yield*t}t.concat=concat;async function*map(e,t){let n=-1;for await(const r of e)yield t(r,n+=1)}t.map=map;async function*filter(e,t){let n=-1;for await(const r of e)if(t(r,n+=1))yield r}t.filter=filter;async function reduce(e,t,...n){const r=e[Symbol.asyncIterator]();let s;if((s=await r.next()).done){if(n.length===0){throw new TypeError("Reduce of empty array with no initial value")}else{return n[0]}}let o=0;let i=n.length===0?s.value:t(n[0],s.value,o);while(true){if((s=await r.next()).done)return i;i=t(i,s.value,o+=1)}}t.reduce=reduce;async function first(e){for await(const t of e)return t}t.first=first;async function count(e){return reduce(e,e=>e+1,0)}t.count=count;async function arrayify(e){return reduce(e,(e,t)=>{e.push(t);return e},[])}t.arrayify=arrayify;async function _stringify(e){const t=e=>e.readableObjectMode;const n=e=>{function readableEncoding(e){const t=e.readableEncoding;if(t!==undefined)return t;return e._readableState?e._readableState.encoding:null}return readableEncoding(e)!==null};if(t(e)||n(e)){return reduce(e,(e,t)=>e+String(t),"")}else{const t=e;return Buffer.concat(await arrayify(t)).toString()}}async function stringify(e){if(e instanceof o.default.Readable)return _stringify(e);return reduce(e,(e,t)=>e+String(t),"")}t.stringify=stringify;async function*of(...e){yield*e}t.of=of},526:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const s=n(129);const o=r(n(87));const i=r(n(669));const a=n(520);const u=i.default.debuglog("@moneyforward/command");const c=e=>{e.stdout&&e.stdout.pipe(process.stdout);e.stderr&&e.stderr.pipe(process.stderr);return[]};let l=(()=>{class Command{constructor(e,t=[],n={},r=c,s=1,o=0){this.command=e;this.args=t;this.options=n;this.iterate=r;this.parallelism=Command.defaultParallelism;this.argumentCountThreshold=Number.POSITIVE_INFINITY;this.initArgumentsSize=Command.calculateInitArgumentsSize(this.command,this.args,o);this.evaluateExitStatus=typeof s==="number"?e=>e<s:s}static sizeOf(e){return Buffer.from(e).length}static sizeOfEnvironment(e){return Object.entries(e).map(([e,t])=>Command.sizeOf(`${e}=${t}`)).reduce((e,t)=>e+t,0)}static calculateMaxArgumentsSize(e=global.process){return e.platform==="win32"?8191:131072-2048-Command.sizeOfEnvironment(e.env)}static calculateInitArgumentsSize(e,t,n){return[e].concat(t).map(Command.sizeOf).reduce((e,t)=>e+t)+Math.max(0,n)}static async execute(e,t,n,r,s,...o){const i=new Command(e,t,n,s,r).execute();if(!s)return a.reduce(i,e=>e,undefined);switch(o.length){case 0:return a.reduce(i,e=>e);case 1:{const[e]=o;return a.reduce(i,e)}default:{const[e,t]=o;return a.reduce(i,e,t)}}}static async substitute(e,t,n,r){const s=new Command(e,t,Object.assign({},n,{stdio:[r,"pipe","ignore"]}),async function*(e){if(e.stdout===null)return;yield a.stringify(e.stdout)}).execute();return a.arrayify(s).then(e=>e.join().replace(/((\r\n)+|\n+)$/,"")).catch(e=>{u("%s",e);return""})}async configureArguments(e){return this.args.concat(e)}async*spawn(...e){const t=await this.configureArguments(e);const n=[this.command,t,this.options];const r=s.spawn(...n);const o=new Promise((e,t)=>{r.once("error",t).once("close",n=>(this.evaluateExitStatus(n)?e:t)(n))});yield*this.iterate(r,...n);return await o}async*execute(e){u("parallelism: %d",this.parallelism);const t=[];async function*drain(e,t){const n=e.length<t?[]:e.splice(0);u("drain %d values.",n.length);for(const e of n)yield*e}let n=0;const r=(e,r=0)=>{t.push(this.spawn(...e));u("%d: spawn `%s` (arguments length: %d)",n+=1,this.command,e.length);return drain(t,r)};try{if(e===undefined){yield*r([]);return}const t=Command.calculateMaxArgumentsSize();const s=[];let o=this.initArgumentsSize;let i=0;for await(const n of e){const e=Command.sizeOf(n);if(e+o>t||i+1>this.argumentCountThreshold){yield*r(s,this.parallelism);s.length=0;o=this.initArgumentsSize;i=0}s.push(n);o+=e;i+=1}if(s.length)yield*r(s)}finally{u("%s %d process(es)",this.command,n)}}}Command.defaultParallelism=o.default.cpus().length;return Command})();t.default=l},597:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(972);const s=n(327);const o=process.platform==="win32";function getSearchPaths(e){e=e.filter(e=>!e.negate);const t={};for(const n of e){const e=o?n.searchPath.toUpperCase():n.searchPath;t[e]="candidate"}const n=[];for(const s of e){const e=o?s.searchPath.toUpperCase():s.searchPath;if(t[e]==="included"){continue}let i=false;let a=e;let u=r.dirname(a);while(u!==a){if(t[u]){i=true;break}a=u;u=r.dirname(a)}if(!i){n.push(s.searchPath);t[e]="included"}}return n}t.getSearchPaths=getSearchPaths;function match(e,t){let n=s.MatchKind.None;for(const r of e){if(r.negate){n&=~r.match(t)}else{n|=r.match(t)}}return n}t.match=match;function partialMatch(e,t){return e.some(e=>!e.negate&&e.partialMatch(t))}t.partialMatch=partialMatch},601:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(470);function getOptions(e){const t={followSymbolicLinks:true,implicitDescendants:true,omitBrokenSymbolicLinks:true};if(e){if(typeof e.followSymbolicLinks==="boolean"){t.followSymbolicLinks=e.followSymbolicLinks;r.debug(`followSymbolicLinks '${t.followSymbolicLinks}'`)}if(typeof e.implicitDescendants==="boolean"){t.implicitDescendants=e.implicitDescendants;r.debug(`implicitDescendants '${t.implicitDescendants}'`)}if(typeof e.omitBrokenSymbolicLinks==="boolean"){t.omitBrokenSymbolicLinks=e.omitBrokenSymbolicLinks;r.debug(`omitBrokenSymbolicLinks '${t.omitBrokenSymbolicLinks}'`)}}return t}t.getOptions=getOptions},621:function(e){"use strict";e.exports=balanced;function balanced(e,t,n){if(e instanceof RegExp)e=maybeMatch(e,n);if(t instanceof RegExp)t=maybeMatch(t,n);var r=range(e,t,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+e.length,r[1]),post:n.slice(r[1]+t.length)}}function maybeMatch(e,t){var n=t.match(e);return n?n[0]:null}balanced.range=range;function range(e,t,n){var r,s,o,i,a;var u=n.indexOf(e);var c=n.indexOf(t,u+1);var l=u;if(u>=0&&c>0){r=[];o=n.length;while(l>=0&&!a){if(l==u){r.push(l);u=n.indexOf(e,l+1)}else if(r.length==1){a=[r.pop(),c]}else{s=r.pop();if(s<o){o=s;i=c}c=n.indexOf(t,l+1)}l=u<c&&u>=0?u:c}if(r.length){a=[o,i]}}return a}},622:function(e){e.exports=require("path")},669:function(e){e.exports=require("util")},684:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const s=r(n(669));const o=r(n(429));const i=n(520);const a=s.default.debuglog("@moneyforward/sca-action-core/tool/git");class Git{async fetchShallow(e,t,n=1){const r=["fetch","-q",`--depth=${n}`];e&&r.push(e);t&&r.push(t);return o.default.execute("git",r)}async parseRevision(e,t){const n=`${t?`${t}/`:""}${e}`;return o.default.substitute("git",["rev-parse","--verify","-q",n])}async*listRemote(){yield*new o.default("git",["remote","-v"],undefined,async function*(e){var t;(t=e.stderr)===null||t===void 0?void 0:t.pipe(process.stderr);if(e.stdout===null)return;e.stdout.unpipe(process.stdout);for await(const t of e.stdout.pipe(new i.transform.Lines)){const[e,n,r,s]=/^(.+)\t(.+) \((fetch|push)\)$/.exec(t)||[];if(e)yield{name:n,url:r,mirror:s==="fetch"?"fetch":"push"}}}).execute()}async*diff(e,t,n="none"){const r=["--no-pager","diff","--no-prefix","--no-color","-U0","--diff-filter=b"];const s=t===undefined?[e]:n==="none"?[e,t]:[`${e}${n}${t}`];a("%s",s.join(" "));yield*new o.default("git",r,undefined,async function*(e){var t;(t=e.stderr)===null||t===void 0?void 0:t.pipe(process.stderr);if(e.stdout===null)return;e.stdout.unpipe(process.stdout);yield*e.stdout.pipe(new i.transform.Lines)}).execute(s)}async measureChangeRanges(e,t,n){a("%s...%s",e,t);const[r,s]=await i.arrayify(i.map(i.of(e,t),async e=>{const t=await this.parseRevision(e);if(t!==""||n===undefined)return t;await this.fetchShallow(n,e);return this.parseRevision(e,n)}));const o=new Map;let u="";for await(const e of this.diff(r,s,"..."))if(/^([@]{2}|[+]{3})\s/.test(e)){if(/^[+]{3}\s/.test(e)){u=e.substring("+++ ".length);continue}const t=((/^@@ (.*) @@.*$/.exec(e)||[])[1]||"").split(" ");const[n,r=1]=t[t.length-1].split(",").map(Number).map(Math.abs);a("%s:%d,%d",u,n,r);const s=o.get(u)||[];o.set(u,s.concat([[n,n+r-1]]))}return o}async showCurrentDirectoryUp(){return o.default.substitute("git",["rev-parse","--show-cdup"])}}t.default=Git},728:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});class SearchState{constructor(e,t){this.path=e;this.level=t}}t.SearchState=SearchState},747:function(e){e.exports=require("fs")},858:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const s=r(n(747));const o=r(n(87));const i=r(n(622));const a=r(n(413));const u=r(n(669));const c=n(181);const l=u.default.debuglog("@moneyforward/code-review-action/reporters/annotation-reporter");let f=(()=>{class AnnotationReporter{constructor(e,t,n){this.changeRanges=e;this.resolver=t;this.commandPrguments=n;this.numberOfWriters=0}async initialize(){const e=i.default.join(await s.default.promises.mkdtemp(i.default.join(o.default.tmpdir(),`-`)),"problem-matcher.json");l("%s",AnnotationReporter.problemMatchers);await s.default.promises.writeFile(e,AnnotationReporter.problemMatchers);console.log(`::add-matcher::${e}`)}async finalize(){for(const e of AnnotationReporter.problemMatcher.map(({owner:e})=>e))console.log("::remove-matcher owner=%s::",e)}createReportWriter(e,t){const n=this.numberOfWriters+=1;return new class AnnotationWriter extends a.default.Writable{constructor(r){super({objectMode:true,write:(e,t,n)=>{this.numberOfProblems+=1;const s=r.resolver.resolve(e.file);const o=Number(e.line);const i=r.changeRanges.get(s)||[];l("%s:%d = %s",s,o,i);for(const[t,n]of i)if(o>=t&&o<=n){const t=Number(e.column);const n=[e.severity,e.code===undefined?"":` \`${e.code}\``,o,Number.isNaN(t)?"":`, column ${t}`,s,e.message].map(e=>typeof e==="number"?e:(e===undefined?"":String(e)).replace(/\s+/g," "));console.log("[%s] Detected%s problem at line %d%s of %s\t%s",...n);this.numberOfDetections+=1;break}n()},final:n=>{const[,s]=r.commandPrguments;const[,o]=t;const i=o.slice(s.length);l("AnnotationWriter # %d detected %d out of %d problems. (%d files)",this.writerNumber,this.numberOfDetections,this.numberOfProblems,i.length);n();e(new c.Statistic(this.numberOfProblems,this.numberOfDetections,i.length))}});this.writerNumber=n;this.numberOfProblems=0;this.numberOfDetections=0;l("Created AnnotationWriter #%d",n)}}(this)}}AnnotationReporter.problemMatcher=[{owner:"@moneyforward/sca-action-core/reporters/annotation-reporter#0",pattern:[{regexp:/^\[([^\t]+)\] Detected(?:| `([^\t]+)`) problem at line (\d+|NaN)(?:|, column (\d+|NaN)) of ([^\t]+)\t([^\t]+)$/.source,file:5,line:3,column:4,severity:1,message:6,code:2}]}];AnnotationReporter.problemMatchers=JSON.stringify({problemMatcher:AnnotationReporter.problemMatcher});return AnnotationReporter})();t.default=f},896:function(e){e.exports=function(e,n){var r=[];for(var s=0;s<e.length;s++){var o=n(e[s],s);if(t(o))r.push.apply(r,o);else r.push(o)}return r};var t=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}},923:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(357);const s=n(87);const o=n(622);const i=n(972);const a=n(93);const u=n(327);const c=n(383);const l=process.platform==="win32";class Pattern{constructor(e,t){this.negate=false;let n;if(typeof e==="string"){n=e.trim()}else{t=t||[];r(t.length,`Parameter 'segments' must not empty`);const s=Pattern.getLiteral(t[0]);r(s&&i.hasAbsoluteRoot(s),`Parameter 'segments' first element must be a root path`);n=new c.Path(t).toString().trim();if(e){n=`!${n}`}}while(n.startsWith("!")){this.negate=!this.negate;n=n.substr(1).trim()}n=Pattern.fixupPattern(n);this.segments=new c.Path(n).segments;this.trailingSeparator=i.normalizeSeparators(n).endsWith(o.sep);n=i.safeTrimTrailingSeparator(n);let s=false;const u=this.segments.map(e=>Pattern.getLiteral(e)).filter(e=>!s&&!(s=e===""));this.searchPath=new c.Path(u).toString();this.rootRegExp=new RegExp(Pattern.regExpEscape(u[0]),l?"i":"");const f={dot:true,nobrace:true,nocase:l,nocomment:true,noext:true,nonegate:true};n=l?n.replace(/\\/g,"/"):n;this.minimatch=new a.Minimatch(n,f)}match(e){if(this.segments[this.segments.length-1]==="**"){e=i.normalizeSeparators(e);if(!e.endsWith(o.sep)){e=`${e}${o.sep}`}}else{e=i.safeTrimTrailingSeparator(e)}if(this.minimatch.match(e)){return this.trailingSeparator?u.MatchKind.Directory:u.MatchKind.All}return u.MatchKind.None}partialMatch(e){e=i.safeTrimTrailingSeparator(e);if(i.dirname(e)===e){return this.rootRegExp.test(e)}return this.minimatch.matchOne(e.split(l?/\\+/:/\/+/),this.minimatch.set[0],true)}static globEscape(e){return(l?e:e.replace(/\\/g,"\\\\")).replace(/(\[)(?=[^/]+\])/g,"[[]").replace(/\?/g,"[?]").replace(/\*/g,"[*]")}static fixupPattern(e){r(e,"pattern cannot be empty");const t=new c.Path(e).segments.map(e=>Pattern.getLiteral(e));r(t.every((e,t)=>(e!=="."||t===0)&&e!==".."),`Invalid pattern '${e}'. Relative pathing '.' and '..' is not allowed.`);r(!i.hasRoot(e)||t[0],`Invalid pattern '${e}'. Root segment must not contain globs.`);e=i.normalizeSeparators(e);if(e==="."||e.startsWith(`.${o.sep}`)){e=Pattern.globEscape(process.cwd())+e.substr(1)}else if(e==="~"||e.startsWith(`~${o.sep}`)){const t=s.homedir();r(t,"Unable to determine HOME directory");r(i.hasAbsoluteRoot(t),`Expected HOME directory to be a rooted path. Actual '${t}'`);e=Pattern.globEscape(t)+e.substr(1)}else if(l&&(e.match(/^[A-Z]:$/i)||e.match(/^[A-Z]:[^\\]/i))){let t=i.ensureAbsoluteRoot("C:\\dummy-root",e.substr(0,2));if(e.length>2&&!t.endsWith("\\")){t+="\\"}e=Pattern.globEscape(t)+e.substr(2)}else if(l&&(e==="\\"||e.match(/^\\[^\\]/))){let t=i.ensureAbsoluteRoot("C:\\dummy-root","\\");if(!t.endsWith("\\")){t+="\\"}e=Pattern.globEscape(t)+e.substr(1)}else{e=i.ensureAbsoluteRoot(Pattern.globEscape(process.cwd()),e)}return i.normalizeSeparators(e)}static getLiteral(e){let t="";for(let n=0;n<e.length;n++){const r=e[n];if(r==="\\"&&!l&&n+1<e.length){t+=e[++n];continue}else if(r==="*"||r==="?"){return""}else if(r==="["&&n+1<e.length){let r="";let s=-1;for(let t=n+1;t<e.length;t++){const n=e[t];if(n==="\\"&&!l&&t+1<e.length){r+=e[++t];continue}else if(n==="]"){s=t;break}else{r+=n}}if(s>=0){if(r.length>1){return""}if(r){t+=r;n=s;continue}}}t+=r}return t}static regExpEscape(e){return e.replace(/[[\\^$.|?*+()]/g,"\\$&")}}t.Pattern=Pattern},960:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const s=r(n(453));const o=r(n(325));(async()=>{console.log("::echo::%s",process.env["RUNNER_DEBUG"]==="1"?"on":"off");try{const e=process.env.INPUT_LOCALE?["-locale",process.env.INPUT_LOCALE]:[];const t=process.env.INPUT_IGNORE?["-i",process.env.INPUT_IGNORE]:[];const n=e.concat(t);process.env["INPUT_OPTIONS"]=JSON.stringify(n);const r=new s.default(o.default);process.exitCode=await r.execute()}catch(e){console.log("::error::%s",e);process.exitCode=1}finally{process.exit()}})()},972:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(357);const s=n(622);const o=process.platform==="win32";function dirname(e){e=safeTrimTrailingSeparator(e);if(o&&/^\\\\[^\\]+(\\[^\\]+)?$/.test(e)){return e}let t=s.dirname(e);if(o&&/^\\\\[^\\]+\\[^\\]+\\$/.test(t)){t=safeTrimTrailingSeparator(t)}return t}t.dirname=dirname;function ensureAbsoluteRoot(e,t){r(e,`ensureAbsoluteRoot parameter 'root' must not be empty`);r(t,`ensureAbsoluteRoot parameter 'itemPath' must not be empty`);if(hasAbsoluteRoot(t)){return t}if(o){if(t.match(/^[A-Z]:[^\\/]|^[A-Z]:$/i)){let e=process.cwd();r(e.match(/^[A-Z]:\\/i),`Expected current directory to start with an absolute drive root. Actual '${e}'`);if(t[0].toUpperCase()===e[0].toUpperCase()){if(t.length===2){return`${t[0]}:\\${e.substr(3)}`}else{if(!e.endsWith("\\")){e+="\\"}return`${t[0]}:\\${e.substr(3)}${t.substr(2)}`}}else{return`${t[0]}:\\${t.substr(2)}`}}else if(normalizeSeparators(t).match(/^\\$|^\\[^\\]/)){const e=process.cwd();r(e.match(/^[A-Z]:\\/i),`Expected current directory to start with an absolute drive root. Actual '${e}'`);return`${e[0]}:\\${t.substr(1)}`}}r(hasAbsoluteRoot(e),`ensureAbsoluteRoot parameter 'root' must have an absolute root`);if(e.endsWith("/")||o&&e.endsWith("\\")){}else{e+=s.sep}return e+t}t.ensureAbsoluteRoot=ensureAbsoluteRoot;function hasAbsoluteRoot(e){r(e,`hasAbsoluteRoot parameter 'itemPath' must not be empty`);e=normalizeSeparators(e);if(o){return e.startsWith("\\\\")||/^[A-Z]:\\/i.test(e)}return e.startsWith("/")}t.hasAbsoluteRoot=hasAbsoluteRoot;function hasRoot(e){r(e,`isRooted parameter 'itemPath' must not be empty`);e=normalizeSeparators(e);if(o){return e.startsWith("\\")||/^[A-Z]:/i.test(e)}return e.startsWith("/")}t.hasRoot=hasRoot;function normalizeSeparators(e){e=e||"";if(o){e=e.replace(/\//g,"\\");const t=/^\\\\+[^\\]/.test(e);return(t?"\\":"")+e.replace(/\\\\+/g,"\\")}return e.replace(/\/\/+/g,"/")}t.normalizeSeparators=normalizeSeparators;function safeTrimTrailingSeparator(e){if(!e){return""}e=normalizeSeparators(e);if(!e.endsWith(s.sep)){return e}if(e===s.sep){return e}if(o&&/^[A-Z]:\\$/i.test(e)){return e}return e.substr(0,e.length-1)}t.safeTrimTrailingSeparator=safeTrimTrailingSeparator}});